(this["webpackJsonpe621-slideshow"]=this["webpackJsonpe621-slideshow"]||[]).push([[0],{10:function(e,t,n){e.exports={displayContainer:"Display_displayContainer__1y-B5",image:"Display_image__1JJz2",text:"Display_text__1LbkM"}},15:function(e,t,n){e.exports={view:"View_view__2vr6n",hidden:"View_hidden__2bpX_",visible:"View_visible__v_6PK"}},29:function(e,t,n){e.exports={cache:"Cache_cache__Nm8x0"}},30:function(e,t,n){e.exports={manageSetButton:"ManageSetButton_manageSetButton__2Mv6b"}},31:function(e,t,n){e.exports={slideshowContainer:"Slideshow_slideshowContainer__3_r4l"}},36:function(e,t,n){},37:function(e,t,n){},6:function(e,t,n){e.exports={interfaceContainer:"Interface_interfaceContainer__32rjR",mainControls:"Interface_mainControls__1f-3y",extraControls:"Interface_extraControls__3sxVc",fadeout:"Interface_fadeout__3FYND",nextSlide:"Interface_nextSlide__1oMMA",previousSlide:"Interface_previousSlide__1G1Z_",exitSlideshow:"Interface_exitSlideshow__1-rsM",viewSource:"Interface_viewSource__1ikEu"}},64:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),i=n(13),r=n.n(i),c=(n(36),n(37),n(7)),o=function(){return Object(c.b)()},u=c.c,l=n(3);function d(e,t){var n=localStorage.getItem(e);if(null===n)return t;try{return JSON.parse(n)}catch(s){return t}}function f(e,t){try{return localStorage.setItem(e,JSON.stringify(t)),!0}catch(n){return!1}}var p={username:"",api_key:"",image_display_size:"sample",video_display_size:"720p",video_display_type:"mp4"},_=function(){return d("settings.username",p.username)},h=function(){return d("settings.api_key",p.api_key)},j=function(){return d("settings.image_display_size",p.image_display_size)},g=function(e){return f("settings.username",e)},b=function(e){return f("settings.api_key",e)},x=Object(l.c)({name:"settings",initialState:p,reducers:{clear:function(e){g(p.username),b(p.api_key)},setLogin:function(e,t){e.username=t.payload.username,e.api_key=t.payload.apiKey,g(t.payload.username),b(t.payload.apiKey)},setImageDisplaySize:function(e,t){e.image_display_size=t.payload,f("settings.image_display_size",t.payload)},setVideoDisplaySize:function(e,t){e.video_display_size=t.payload,f("settings.video_display_size",t.payload)},setVideoDisplayType:function(e,t){e.video_display_type=t.payload,f("settings.video_display_type",t.payload)}}}),v=x.actions,m=(v.clear,v.setLogin),O=v.setImageDisplaySize,y=(v.setVideoDisplaySize,v.setVideoDisplayType,function(e){return e.settings.username}),w=function(e){return e.settings.image_display_size},S=x.reducer,C=n(4),k=n(27),N=n.n(k),I=n(28),z=n.n(I),D=N.a.create({baseURL:"https://e621.net/"});D.interceptors.request.use((function(e){e.params=Object(C.a)(Object(C.a)({},e.params),{},{_client:"SanguineDerg's Slideshow/1.0 (by SanguineDerg on e621)"});var t=_(),n=h();return""!==t&&""!==n&&(e.auth={username:t,password:n}),e}));var M=z()(D,{maxRPS:1}),P={getPosts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return M.get("posts.json",{params:e})}},V=function(e){switch(e.file.ext){case"jpg":case"png":case"gif":return"image";case"webm":return"video";case"swf":return"flash"}},B=function(e){var t=j(),n=e.file.md5;switch(t){case"full":return"https://static1.e621.net/data/".concat(n.substring(0,2),"/").concat(n.substring(2,4),"/").concat(n,".").concat(e.file.ext);case"sample":return e.sample.has?"https://static1.e621.net/data/sample/".concat(n.substring(0,2),"/").concat(n.substring(2,4),"/").concat(n,".").concat(e.file.ext):"https://static1.e621.net/data/".concat(n.substring(0,2),"/").concat(n.substring(2,4),"/").concat(n,".").concat(e.file.ext)}},L=function(e){switch(V(e)){case"image":return function(e){if(null===e.file.url)return B(e);switch(j()){case"full":return e.file.url;case"sample":return e.sample.url}}(e);case"video":case"flash":return""}},J=P,F=n(5),R=n.n(F),T=n(9),K=n(14),W=Object(l.b)("posts/fetchPosts",function(){var e=Object(T.a)(R.a.mark((function e(t,n){var s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.getPosts({tags:X(n.getState()),page:Y(n.getState())});case 2:return s=e.sent,e.abrupt("return",s.data.posts);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),q=Object(l.c)({name:"posts",initialState:{posts:{},fetch_order:[],fetch_tags:"",fetch_page:1,fetch_status:"idle",fetch_id:"",slideshow_index:0},reducers:{clear:function(e){e.fetch_order=[],e.fetch_tags="",e.fetch_page=1,e.fetch_status="idle",e.fetch_id="",e.slideshow_index=0},startSearch:function(e,t){e.fetch_order=[],e.fetch_tags=t.payload,e.fetch_page=1,e.fetch_status="idle",e.fetch_id="",e.slideshow_index=0},previousSlide:function(e){0!==e.slideshow_index&&(e.slideshow_index-=1)},nextSlide:function(e){e.slideshow_index<e.fetch_order.length-1&&(e.slideshow_index+=1)}},extraReducers:function(e){e.addCase(W.pending,(function(e,t){e.fetch_status="loading",e.fetch_id=t.meta.requestId})).addCase(W.fulfilled,(function(e,t){if(t.meta.requestId===e.fetch_id){var n=t.payload;0===n.length?(e.fetch_status="finished",e.fetch_page=0,e.fetch_id=""):(e.fetch_status="idle",e.fetch_page=e.fetch_page&&e.fetch_page+1,e.fetch_id="",n.forEach((function(t){e.posts[t.id]=t,e.fetch_order.push(t.id)})))}}))}}),A=q.actions,E=(A.clear,A.startSearch),G=A.previousSlide,U=A.nextSlide,X=function(e){return e.posts.fetch_tags},Y=function(e){return e.posts.fetch_page},Z=function(e){return e.posts.fetch_order},$=function(e){return e.posts.posts},H=function(e){return e.posts.slideshow_index},Q=Object(K.a)([H,Z],(function(e,t){return Array.from({length:6},(function(t,n){return n+e-2})).filter((function(e){return e>=0&&e<t.length}))})),ee=Object(K.a)([$,Z,H],(function(e,t,n){return 0===t.length?null:e[t[n]]})),te=Object(K.a)([ee],(function(e){return null!==e?e.id:null})),ne=Object(K.a)([$,Z,Q],(function(e,t,n){return 0===t.length?[]:n.map((function(n){return e[t[n]]}))})),se=function(){return function(e,t){"idle"===t().posts.fetch_status&&e(W())}},ae=q.reducer,ie=n(29),re=n.n(ie),ce=n(0);function oe(){var e=u(ne);return Object(ce.jsx)("div",{className:re.a.cache,children:e.map((function(e){return"image"===V(e)&&Object(ce.jsx)("img",{src:L(e),alt:""},e.id)}))})}var ue=n(8),le=Object(l.c)({name:"view",initialState:{screen:"search"},reducers:{switchScreen:function(e,t){e.screen=t.payload}}}),de=le.actions.switchScreen,fe=function(e){return e.view.screen},pe=le.reducer;function _e(){var e=Object(s.useState)(""),t=Object(ue.a)(e,2),n=t[0],a=t[1],i=o();return Object(ce.jsxs)("div",{children:[Object(ce.jsx)("input",{value:n,onChange:function(e){return a(e.target.value)},type:"text"}),Object(ce.jsx)("br",{}),Object(ce.jsx)("button",{onClick:function(){i(function(e){return function(t,n){t(E(e)),t(W())}}(n)),i(de("slideshow"))},children:"Search"}),Object(ce.jsx)("br",{}),Object(ce.jsx)("button",{onClick:function(){i(de("slideshow"))},children:"Close"}),Object(ce.jsx)("br",{}),Object(ce.jsx)("button",{onClick:function(){i(de("settings"))},children:"Settings"})]})}var he={getManagedSets:function(){return M.get("post_sets/for_select.json")},addPostToSet:function(e,t){var n=new FormData;return n.append("post_ids[]",e.toString()),M.post("post_sets/".concat(t,"/add_posts.json"),n)}},je=Object(l.b)("sets/fetchManagedSets",Object(T.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.getManagedSets();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),ge=Object(l.b)("sets/addCurrentPostToSet",function(){var e=Object(T.a)(R.a.mark((function e(t,n){var s,a,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=te(n.getState()),a=me(n.getState()),null!==s&&null!==a){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,he.addPostToSet(s,a);case 6:return i=e.sent,e.abrupt("return",i.data);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),be=Object(l.c)({name:"sets",initialState:{managed_sets:null,working_set_id:null,working_set:null,update_set_status:"idle"},reducers:{setWorkingSetId:function(e,t){e.working_set_id=t.payload,e.working_set=null}},extraReducers:function(e){e.addCase(je.fulfilled,(function(e,t){e.managed_sets=t.payload})).addCase(je.rejected,(function(e,t){e.managed_sets=null,e.working_set_id=null,e.working_set=null})).addCase(ge.pending,(function(e,t){e.update_set_status="working"})).addCase(ge.fulfilled,(function(e,t){e.working_set=t.payload,null===t.payload?e.update_set_status="failed":e.update_set_status="added"})).addCase(ge.rejected,(function(e,t){e.update_set_status="failed"}))}}),xe=be.actions.setWorkingSetId,ve=function(e){return e.sets.managed_sets},me=function(e){return e.sets.working_set_id},Oe=Object(K.a)([te,function(e){return e.sets.working_set}],(function(e,t){return null!==e&&null!==t&&t.post_ids.includes(e)})),ye=be.reducer;function we(){var e=Object(s.useState)(""),t=Object(ue.a)(e,2),n=t[0],a=t[1],i=Object(s.useState)(""),r=Object(ue.a)(i,2),c=r[0],l=r[1],d=u(y),f=u(w),p=u(ve),_=u(me),h=o();return Object(ce.jsxs)("div",{children:[Object(ce.jsx)("span",{children:""!==d?"Logged in as ".concat(d):"Not logged in"}),Object(ce.jsx)("br",{}),Object(ce.jsx)("input",{value:n,onChange:function(e){return a(e.target.value)},type:"text"}),Object(ce.jsx)("br",{}),Object(ce.jsx)("input",{value:c,onChange:function(e){return l(e.target.value)},type:"password"}),Object(ce.jsx)("br",{}),Object(ce.jsx)("button",{onClick:function(){h(m({username:n,apiKey:c}))},children:"Save Login"}),Object(ce.jsx)("hr",{}),Object(ce.jsxs)("select",{value:f,onChange:function(e){return h(O(e.target.value))},children:[Object(ce.jsx)("option",{value:"full",children:"Full Image"}),Object(ce.jsx)("option",{value:"sample",children:"Sample Image"})]}),Object(ce.jsx)("hr",{}),Object(ce.jsx)("button",{onClick:function(){return h(je())},children:"Get sets"}),Object(ce.jsx)("br",{}),null!==p&&Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsxs)("select",{value:null!==_?_:void 0,onChange:function(e){return h(xe(""!==e.target.value?parseInt(e.target.value):null))},children:[Object(ce.jsx)("option",{children:"Select a set"}),Object(ce.jsx)("optgroup",{label:"Owned",children:p.Owned.map((function(e,t){var n=Object(ue.a)(e,2),s=n[0],a=n[1];return Object(ce.jsx)("option",{value:a,children:s},t)}))}),Object(ce.jsx)("optgroup",{label:"Owned",children:p.Maintained.map((function(e,t){var n=Object(ue.a)(e,2),s=n[0],a=n[1];return Object(ce.jsx)("option",{value:a,children:s},t)}))})]}),Object(ce.jsx)("hr",{})]}),Object(ce.jsx)("button",{onClick:function(){h(de("search"))},children:"Close"})]})}var Se=n(10),Ce=n.n(Se);function ke(){var e=Object(c.c)(ee),t=null!==e?V(e):null;return Object(ce.jsxs)("div",{className:Ce.a.displayContainer,children:["image"===t&&Object(ce.jsx)("img",{className:Ce.a.image,src:null!==e?L(e):void 0,alt:""}),"video"===t&&Object(ce.jsx)("div",{className:Ce.a.text,children:Object(ce.jsx)("span",{children:"Video"})}),"flash"===t&&Object(ce.jsx)("div",{className:Ce.a.text,children:Object(ce.jsx)("span",{children:"Flash"})})]})}var Ne=n(6),Ie=n.n(Ne),ze=n(30),De=n.n(ze);function Me(){var e=o(),t=u(Oe);return Object(ce.jsx)("button",{className:De.a.manageSetButton,onClick:function(){return e(ge())},children:t?"\u2796":"\u2795"})}function Pe(){var e=o(),t=u(ee);return Object(ce.jsxs)("div",{className:Ie.a.interfaceContainer,children:[Object(ce.jsxs)("div",{className:Ie.a.mainControls,children:[Object(ce.jsx)("div",{className:Ie.a.nextSlide,onClick:function(){return e((function(e,t){e(U()),H(t())>=Z(t()).length-5&&e(se())}))},children:"Next"}),Object(ce.jsx)("div",{className:Ie.a.previousSlide,onClick:function(){return e((function(e,t){e(G()),H(t())>=Z(t()).length-5&&e(se())}))},children:"Previous"}),Object(ce.jsx)("div",{className:Ie.a.exitSlideshow,onClick:function(){return e(de("search"))},children:"Close"}),Object(ce.jsx)("a",Object(C.a)(Object(C.a)({className:Ie.a.viewSource,target:"_blank",rel:"noopener noreferrer"},null===t?{onClick:function(){}}:{href:"https://e621.net/posts/".concat(t.id)}),{},{children:"Link"}))]}),Object(ce.jsx)("div",{className:Ie.a.extraControls,children:Object(ce.jsx)(Me,{})})]})}var Ve=n(31),Be=n.n(Ve);function Le(){return Object(ce.jsxs)("div",{className:Be.a.slideshowContainer,children:[Object(ce.jsx)(ke,{}),Object(ce.jsx)(Pe,{})]})}var Je=n(15),Fe=n.n(Je);function Re(e){return Object(ce.jsx)("div",{className:Fe.a.view+" "+(e.visible?Fe.a.visible:Fe.a.hidden),children:e.children})}var Te=function(){var e=u(fe);return Object(ce.jsxs)("div",{className:"App",children:[Object(ce.jsx)(oe,{}),Object(ce.jsx)(Re,{visible:"slideshow"===e,children:Object(ce.jsx)(Le,{})}),Object(ce.jsx)(Re,{visible:"search"===e,children:Object(ce.jsx)(_e,{})}),Object(ce.jsx)(Re,{visible:"settings"===e,children:Object(ce.jsx)(we,{})})]})},Ke=Object(l.a)({reducer:{posts:ae,view:pe,settings:S,sets:ye},preloadedState:{settings:{username:_(),api_key:h(),image_display_size:j(),video_display_size:d("settings.video_display_size",p.video_display_size),video_display_type:d("settings.video_display_type",p.video_display_type)}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Ke.dispatch(je()),r.a.render(Object(ce.jsx)(a.a.StrictMode,{children:Object(ce.jsx)(c.a,{store:Ke,children:Object(ce.jsx)(Te,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[64,1,2]]]);
//# sourceMappingURL=main.5c267d6a.chunk.js.map